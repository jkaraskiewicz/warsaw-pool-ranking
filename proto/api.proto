syntax = "proto3";

package api;

// Player summary for lists
message PlayerListItem {
  int32 rank = 1;
  int64 player_id = 2;
  // cuescore_id is optional in Rust model, mapped to int64. 
  // In proto3, optional fields are explicit.
  optional int64 cuescore_id = 3; 
  string name = 4;
  double rating = 5;
  int32 games_played = 6;
  string confidence_level = 7; // string for JSON compatibility ("established", etc.)
  int32 matches_played = 8;
  optional string avatar_url = 9;
}

// Detailed player view
message PlayerDetail {
  int64 player_id = 1;
  optional int64 cuescore_id = 2;
  string name = 3;
  string cuescore_profile_url = 4;
  double rating = 5;
  int32 games_played = 6;
  string confidence_level = 7;
  double ml_rating = 8;
  double starter_weight = 9;
  double ml_weight = 10;
  int32 effective_games = 11;
  optional string last_played = 12; // Date string
  int32 matches_played = 13;
  optional string avatar_url = 14;
  repeated MatchResult last_matches = 15;
}

message MatchResult {
  string date = 1;
  string tournament_name = 2;
  string opponent_name = 3;
  int64 opponent_id = 4;
  int32 player_total_score = 5;
  int32 opponent_total_score = 6;
}

// Paginated list response
message PlayerListResponse {
  repeated PlayerListItem items = 1;
  int32 total = 2;
  int32 page = 3;
  int32 page_size = 4;
}

message HeadToHeadMatch {
  string date = 1;
  string tournament_name = 2;
  int32 player1_wins = 3;
  int32 player2_wins = 4;
}

message HeadToHeadStats {
  int32 total_matches = 1;
  int32 player1_match_wins = 2;
  int32 player2_match_wins = 3;
  int32 total_frames = 4;
  int32 player1_frame_wins = 5;
  int32 player2_frame_wins = 6;
}

message HeadToHeadResponse {
  PlayerDetail player1 = 1;
  PlayerDetail player2 = 2;
  double probability_p1_wins = 3;
  repeated HeadToHeadMatch matches = 4;
  HeadToHeadStats stats = 5;
}
